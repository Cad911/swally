// Generated by CoffeeScript 1.6.3
(function() {
  window.ourApp.factory('Categories', [
    '$resource', function($resource) {
      return $resource('http://:url/:categoryId.json', {
        url: "swally.herokuapp.com/categories",
        categoryId: '@id'
      }, {
        getById: {
          method: 'GET'
        }
      });
    }
  ]);

  window.ourApp.factory('Pledges', [
    '$resource', function($resource) {
      return $resource('http://:url/pledges.json', {
        url: "swally.herokuapp.com"
      }, {
        getAll: {
          method: 'GET'
        }
      });
    }
  ]);

  window.ourApp.factory('sharedServices', [
    '$rootScope', function($rootScope) {
      var sharedBroadcoast, sharedVar;
      sharedVar = {};
      sharedVar.show_mini_game = false;
      sharedVar.current_mini_game = [];
      sharedVar.showMiniGame = function(current_mini_game) {
        this.show_mini_game = true;
        this.current_mini_game = current_mini_game;
        return sharedBroadcoast();
      };
      sharedVar.hideMiniGame = function() {
        this.show_mini_game = false;
        this.current_mini_game = {};
        return sharedBroadcoast();
      };
      sharedBroadcoast = function() {
        return $rootScope.$broadcast('show-mini-game');
      };
      sharedVar.sharedScrollToZero = function() {
        return $rootScope.$broadcast('scroll-to-zero');
      };
      return sharedVar;
    }
  ]);

  window.ourApp.factory('statsServices', [
    '$rootScope', function($rootScope) {
      var device_name, position, statsVar;
      statsVar = {};
      device_name = '';
      position = {
        lat: 0,
        long: 0
      };
      setTimeout(function() {
        return position = {
          lat: 0,
          long: 0
        };
      }, 100000);
      statsVar.getDeviceName = function() {
        var user_agent;
        if (device_name === '') {
          user_agent = navigator.userAgent;
          if (/iPad/.test(user_agent)) {
            device_name = 'iPad';
          } else if (/iPhone/.test(user_agent)) {
            device_name = 'iPhone';
          } else if (/Android/.test(user_agent)) {
            device_name = 'Android';
          }
        }
        return statsVar.device_name;
      };
      statsVar.getLatLong = function() {
        if (position.lat === 0 && position.long === 0) {
          position = {
            lat: 0,
            long: 0
          };
        }
        return statsVar.position;
      };
      statsVar.saveStats = function() {
        var stats;
        this.getLatLong();
        return stats = {
          lat: this.position.lat,
          long: this.position.long,
          swallow: 1,
          device: this.device_name
        };
      };
      return statsVar;
    }
  ]);

}).call(this);
